<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>داشبورد داکتر - نوبت‌ها</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet" />
  <link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Vazir', sans-serif;
      background: linear-gradient(to right, #f0f9ff, #e0f2fe);
    }
    h1, h2 {
      font-family: 'Shabnam', sans-serif;
    }
  </style>
</head>
<body class="min-h-screen p-6">

  <header class="mb-6 flex justify-between items-center max-w-5xl mx-auto">
    <h1 class="text-3xl font-bold text-blue-700">داشبورد داکتر عبدالرحمن رضوانی</h1>
    <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">
      خروج
    </button>
  </header>

  <main class="max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg">

    <h2 class="text-xl font-bold mb-4">نوبت‌های ثبت شده</h2>

    <div id="appointmentsContainer" class="space-y-4 text-right">
      <!-- نوبت‌ها اینجا نمایش داده می‌شوند -->
    </div>

    <p id="noAppointments" class="text-gray-500 text-center mt-8 hidden">
      هنوز نوبتی ثبت نشده است.
    </p>
  </main>

  <script>
    // تابع بارگذاری نوبت‌ها از localStorage
    function loadAppointments() {
      const container = document.getElementById('appointmentsContainer');
      const noAppointmentsMsg = document.getElementById('noAppointments');
      container.innerHTML = '';

      // ساختار localStorage انتظار می‌رود مثل این باشد:
      // bookedSlots = {
      //   "1403-02-10": [{ time: "08:00", patientName: "علی" }, ...],
      //   ...
      // }

      const bookedSlots = JSON.parse(localStorage.getItem('bookedSlots') || '{}');
      const dates = Object.keys(bookedSlots).sort();

      if (dates.length === 0) {
        noAppointmentsMsg.classList.remove('hidden');
        return;
      } else {
        noAppointmentsMsg.classList.add('hidden');
      }

      dates.forEach(date => {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'border rounded p-4 shadow-sm bg-blue-50';

        const dateHeader = document.createElement('h3');
        dateHeader.textContent = `تاریخ: ${date}`;
        dateHeader.className = 'font-bold mb-2 text-blue-800';

        dayDiv.appendChild(dateHeader);

        const list = document.createElement('ul');
        list.className = 'list-disc list-inside space-y-1';

        bookedSlots[date].forEach(slot => {
          const item = document.createElement('li');
          item.textContent = `ساعت: ${slot.time} - نام بیمار: ${slot.patientName || 'بدون نام'}`;
          list.appendChild(item);
        });

        dayDiv.appendChild(list);
        container.appendChild(dayDiv);
      });
    }

    // بارگذاری نوبت‌ها هنگام ورود به صفحه
    loadAppointments();

    // دکمه خروج (خالی کردن session و برگشت به صفحه ورود)
    document.getElementById('logoutBtn').addEventListener('click', () => {
      // اگر چیزی ذخیره برای ورود گذاشتی، پاک کن
      // localStorage.removeItem('loggedInDoctor'); // اگر استفاده کردی

      window.location.href = 'login.html'; // بازگشت به صفحه ورود
      
    });
  </script>
</body>
</html>
